[![Build Status](https://travis-ci.org/ummecasino/acmenator.svg?branch=master)](https://travis-ci.org/ummecasino/acmenator)
[![Code Coverage](https://codecov.io/gh/ummecasino/acmenator/branch/master/graph/badge.svg)](https://codecov.io/gh/ummecasino/acmenator)
[![Codacy Badge](https://api.codacy.com/project/badge/Grade/2ffa857ebafc4aca8a502cda4abca49a)](https://www.codacy.com/manual/ummecasino/acmenator?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=ummecasino/acmenator&amp;utm_campaign=Badge_Grade)
[![Docker Cloud Automated build](https://img.shields.io/docker/cloud/automated/ummecasino/acmenator)](https://hub.docker.com/r/ummecasino/acmenator)

# acmenator

`acmenator` is small tool to convert JSON files generated by Traefik to a `PEM key/certificate bundle` and/or a `PKCS12 keystore`.

## About

`acmenator` provides the ability to either do a oneshot conversion or a continuous observation (`-watch` parameter) of a source file for changes. This enables the dynamic creation and update of certificates which can be used by different programs.
This may be helpful on systems like `Unraid` where `Traefik` is used as a reverse proxy for different `Docker` containers which may need a PEM oder PKCS style certificate.

## Usage

```bash
  -debug
        Enable debug logging
  -input string
        The JSON source produced by Traefik
  -outdir string
        The output directory for generated certs
  -p string
        Password for the PKCS keystore (default "changeit")
  -pem
        Produce a PEM style key/cert pair
  -pkcs
        Produce a PKCS12 keystore
  -watch
        Keep the program running and watch the source for changes
```

### Example

```bash
./acmenator -input /traefik.json -outdir target -pem -pkcs
```

## Running as Docker container

The default way to run `acmenator` is via `Docker`.

```bash
docker run -d \
  -v /path/to/my/cert/traefik.json:/traefik.json \
  -v /path/to/target:/target \
  ummecasino/acmenator:latest -input /traefik.json -outdir /target \
  -pem -watch
```
